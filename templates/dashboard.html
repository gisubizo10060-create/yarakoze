<!DOCTYPE html>
<html>
<head>
  <title>Home Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<h2>Home Dashboard</h2>
<div id="map" style="height:400px;"></div>
<p>Message: <span id="message"></span></p>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<script>
var map = L.map('map').setView([0,0], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
var marker = L.marker([0,0]).addTo(map);

function updateMap() {
    fetch('/get_location')
    .then(res => res.json())
    .then(data => {
        marker.setLatLng([data.latitude, data.longitude]);
        document.getElementById('message').innerText = data.message;
        map.setView([data.latitude, data.longitude], 13);
    });
}

setInterval(updateMap, 3000);
</script>
</body>
</html>
